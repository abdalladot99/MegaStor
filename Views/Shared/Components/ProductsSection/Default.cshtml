 @model List<Product>
<div class="d-flex justify-content-between align-items-center flex-wrap gap-2">
    <h3 class="mb-0">Product List</h3>
    <a asp-controller="Product" asp-action="Create" class="btn btn-primary mt-2 mt-sm-0">
        <i class="bi bi-plus-circle"></i> Add Product
    </a>
</div>

<!-- Scroll Wrapper -->
<div class="table-responsive mt-3" style="max-height: 600px; overflow-y: auto;">
    <table class="table table-striped">
        <thead class="table-dark sticky-top">
            <tr>
                <th></th>
                <th>Name</th>
                <th>Price</th>
                <th>Discount</th>
                <th>DiscountPrice</th>
                <th>Seller</th>
                <th>Category</th>
                <th>Sub Category</th>
                <th>Quantity</th>
                <th>Stock</th>
                <th>Rating</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var p in Model)
            {
                <tr>
                    <td>
                        <img src="/img/@p.ImageUrl" style="width: 40px; height: 40px; object-fit: cover; border-radius: 50%;" alt="No Image" />
                    </td>
                    <td>@p.Name</td>
                    <td>@p.Price.ToString("C0", new System.Globalization.CultureInfo("en-US"))</td>
                    <td>@p.discount %</td>
                    @if (p.DiscountPrice == 0)
                    {
                        <td>the same price</td>
                    }
                    else
                    {
                        <td>@Html.DisplayFor(modelItem => p.DiscountPrice)</td>
                    }
                    <td>@p.Vendor.FullName</td>
                    <td>@p.Category.Name</td>
                    <td>@p.SubCategory.CategoryName</td>
                    <td>@p.Quantity</td>
                    @if (p.IsAvailable)
                    {
                        <td><span class="badge bg-success text-light">available</span></td>
                    }
                    else
                    {
                        <td><span class="badge bg-danger text-light">Not available</span></td>
                    }
                    <td>@p.AverageRating <i class="fa fa-star"></i></td>
                    <td>
                        <a asp-controller="Product" asp-action="Edit" asp-route-id="@p.Id"
                           class="btn btn-sm btn-outline-info edit-btn" title="Edit">
                            <i class="bi bi-pencil-square"></i>
                        </a>
                        <a asp-controller="Product" asp-action="Details" asp-route-id="@p.Id"
                           class="btn btn-sm btn-outline-secondary view-btn" title="View">
                            <i class="bi bi-eye"></i>
                        </a>
                        <button onclick="showAlert(@p.Id,'/Product/Delete')" class="btn btn-sm btn-outline-danger" title="Delete">
                            <i class="bi bi-trash"></i>
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
