@model List<ShowUsersViewModel>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
        <h3 class="mb-0">Users List</h3>
        <a asp-controller="AccountSettings" asp-action="Register" class="btn btn-primary mt-2 mt-sm-0">
            <i class="bi bi-person-plus-fill"></i> Create New User
        </a>
    </div>

    <!-- Scroll Wrapper -->
    <div class="table-responsive" style="max-height: 500px; overflow-y: auto;">
        <table class="table table-striped table-hover align-middle">
            <thead class="table-dark sticky-top">
                <tr>
                    <th>Image</th>
                    <th>Name</th>
                    <th>Role</th>
                    <th>Email</th>
                    <th>PhoneNumber</th>
                    <th>DateCreated</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            <img src="/img/@item.ImgUrl" style="width: 40px; height: 40px; object-fit: cover; border-radius: 50%;" alt="No Image" />
                        </td>
                        <td>@Html.DisplayFor(modelItem => item.UserName)</td>
                        <td>@Html.DisplayFor(modelItem => item.Role)</td>
                        <td>@Html.DisplayFor(modelItem => item.Email)</td>
                        <td>@Html.DisplayFor(modelItem => item.PhoneNumber)</td>
                        <td>@Html.DisplayFor(modelItem => item.DateCreated)</td>
                         <td>
                                <a  href="#" class="btn btn-sm btn-outline-info" title="Edit">
                                    <i class="bi bi-pencil-square"></i>
                                </a>
                                <a href="#" class="btn btn-sm btn-outline-secondary" title="View">
                                    <i class="bi bi-eye"></i>
                                </a>
                                @if (User.IsInRole("Admin")&&User.IsInRole("MainAdmin"))
                                {
                                    <button onclick="showAlert('@item.Id', '/Admin/DeleteUser')" class="btn btn-sm btn-outline-danger" title="Delete">
                                        <i class="bi bi-trash"></i>
                                    </button>

                                    <a class="btn btn-sm btn-outline-warning" asp-controller="Admin" asp-action="ChangeUserRole" asp-route-Id="@item.Id" title="Change Role">
                                        <i class="bi bi-shield-lock"></i> 
                                    </a>

                                    <a class="btn btn-sm btn-outline-success" asp-controller="Admin" asp-action="AddRoleForUser" asp-route-Id="@item.Id" title="Add Role">
                                        <i class="bi bi-person-plus"></i>
                                    </a>
                                }
                            </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section Scripts {
    <script src="~/js/Custom.js" asp-append-version="true"></script>
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
